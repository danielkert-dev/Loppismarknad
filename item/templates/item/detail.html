{% extends 'core/base.html' %}
{% load static %}

{% block title %}{{ item.name }}{% endblock  %}

{% block content %}
<div class="container">
    <div class="row mt-3"> 

        <div class="col-xl-6 mb-4 my-auto">
        <img 
        src="{{ item.image.url }}" 
        class="w-100 rounded shadow" 
            />
        </div>

        <div class="col-lg  p-3 mb-4" >
            <h3 class="mb-3 mt-3 text-break"> {{ item.name }}</h3>
            <p class="text-secondary mb-2"><strong>Price: </strong>{{ item.price }}</p>
            <p class="text-secondary mb-2"><strong>Seller: </strong>{{ item.created_by.username}}</p>
            {% if item.description %}
            <p class="text-secondary mb-2"><strong>Description: </strong> {{ item.description}} </p>
            {% endif %}
            <hr>
            {% if request.user == item.created_by %}
                <p>This is your item</p>
                <a href="{% url 'item:edit' item.id %}" class="btn btn-primary btn-outline-light mt-1">Edit</a>
                <a href="{% url 'item:delete' item.id %}" class="btn btn-danger mt-1">Delete</a>
                <br/><br/>
            {% else %}
            <a href="#" class="btn btn-primary btn-outline-light  mt-1">Contact seller</a>
            {% endif %}
        </div>

    </div>
</div>
<div class="container">
<div class="w-100 h-1/2 my-auto">
    <img src="https://www.netmaps.net/wp-content/uploads/2016/03/Helsinki-Vector-Map.jpg" class="w-100 rounded shadow"/>
</div>
</div>
    <hr />

    <h3 class="text-center m-3">Related Items</h3>


                
    <div class="container justify-content-center">
        <div class="row">
            {% for item in related_items %}
            <div class="col-lg  mb-4 mb-lg-0">
                <div class="card mb-4 shadow">
                <a href="{% url 'item:detail' item.id %}">

                    <img
                    data-src="{{ item.image.url }}" 
                    alt="{{ item.name }}"
                    class="item-image lazy w-100 shadow rounded-top card-img-top "
                    />

                    <table class="table table-sm table-dark table-borderless rounded-bottom card-body bg-dark m-0">
                        <tbody>
                          <tr>
                            <td class="d-flex flex-row justify-content-between align-middle m-2">
                              <h4 class="card-title pt-1">{{item.price}}€</h4>
                              <div class="btn btn-light text-dark pe-none">
                                <div class="row p-0 m-0">
                                  {% if item.status|lower == 'skicka' %}
                                    <img src="{% static 'skicka.svg' %}" class="col p-0 " width="20px" height="20px" style="margin-top: .1rem"/>
                                    <p class="col p-0 m-0 px-1">Skickas</p>
                                  {% elif item.status|lower == 'hämta' %}
                                    <img src="{% static 'ta_emot.svg' %}" class="col p-0 " width="20px" height="20px" style="margin-top: .2rem"/>
                                    <p class="col p-0 m-0 px-1">Hämta</p>
                                  {% elif item.status|lower == 'träffa' %}
                                    <img src="{% static 'träffa.svg' %}" class="col-sm p-0" width="20px" height="20px" style="margin-top: .1rem" />
                                    <p class="col-sm p-0 m-0 px-1">{{ item.status }}</p>
                                  {% endif %}
                                </div>
                              </div>
                            </td>
                            <td class="d-flex flex-row justify-content-between align-middle m-2">
                              <h4 class="card-text col-sm m-0 p-0">{{item.name|truncatechars:12}}</h4>
                              <p class="card-text text-secondary m-0 p-0">{{item.created_at|date:"d M Y"}}</p>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      

                </a>
            </div>
            </div>
            {% endfor %}
        </div>
    </div>


    
    <br /><br />
</div>
{% endblock  %}
